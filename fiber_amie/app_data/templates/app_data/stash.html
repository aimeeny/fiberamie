{% extends 'app_users/base_layout.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}

<!--STASH -------------------------  -->
<link href="{% static 'base.css' %}" rel="stylesheet">

<div class="stash" id="app">
    <div class="topnav">
        <a href="/settings">
            <img src="{% static 'settings.svg' %}">
        </a>
        <h1><i>yarn stash</i></h1>
        <img src="{% static 'fiber-amie-icon.png' %}">
    </div>

    <!-- ADD YARN BUTTON AND FORM  -->
    <button class="button" @click="showModal = true">
        Add Yarn
    </button>
    <transition name="fade" appear>
        <div class="modal-overlay" v-if="showModal" @click="showModal = false"></div>
    </transition>
    <transition name="slide" appear>
        <div class="modal" v-if="showModal">
            <form @submit.prevent="addYarn">
                <label for="name">Yarn Brand & Name</label><br>
                <input v-model="name" type="name" id="name"><br>
                <label for="fiber_type">Fiber Type</label><br>
                <input v-model="fiber_type" type="fiber_type" id="fiber_type"><br>
                <label for="colorway">Colorway</label><br>
                <input v-model="colorway" type="colorway" id="colorway"><br>
                <label for="skeins"># of Skeins</label><br>
                <input v-model="skeins" type="skeins" id="skeins"><br>
                <label for="yardage">Total Yardage</label><br>
                <input v-model="yardage" type="yardage" id="yardage"><br>
                <label for="weight">Yarn Weight/Category</label><br>
                <input v-model="weight" type="weight" id="weight"><br>
                <label for="image">Image</label><br>
                <input @change="imageSelected" type="file" id="image"><br>
                <label for="notes">Notes</label><br>
                <input v-model="notes" type="notes" id="notes"><br>
            </form>
            <button type="submit" class="button" @click="showModal = false; addYarn()">
                Submit
            </button>
        </div>
    </transition>

    <!-- <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ add_yarn_form|crispy }}
        <button type="submit">Add</button> -->


    <!-- STASH LIST  -->
    <h4><i>Your current stash</i></h4>
    <div class="yarn-list">
        <div class="yarn-card" v-for="yarn in yarns">
            <p>[[ yarn.name ]]
                <br>
                "[[ yarn.colorway ]]"
            </p>
            <div class="yarn-image">
                <img class="cover" :src="[[ yarn.image ]]"><br>
            </div>
            <button @click="deleteYarn(yarn)" type="button" id="delete-yarn">Delete</button>
        </div>
    </div>

    <!-- BOTTOM NAV  -->
    <div class="navbar">
        <div class="icon">
            <a href="/home">
                <img src="{% static 'home.svg' %}">
            </a>
        </div>
        <div class="icon">
            <a href="/search">
                <img src="{% static 'search.svg' %}">
            </a>
        </div>
        <div class="icon">
            <a href="/projects">
                <img src="{% static 'projects.svg' %}">
            </a>
        </div>
        <div class="icon">
            <a href="/stash">
                <img src="{% static 'stash.png' %}">
            </a>
        </div>
        <div class="icon">
            <a href="/tools">
                <img src="{% static 'needles.png' %}">
            </a>
        </div>

    </div>
</div>
<script src="{% static 'stash.js' %}"></script>
{% endblock %}